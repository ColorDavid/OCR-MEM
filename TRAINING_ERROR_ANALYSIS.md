# è®­ç»ƒé”™è¯¯åˆ†æžä¸Žä¿®å¤æ€»ç»“

## æ‰§è¡Œæ—¶é—´
2025å¹´12æœˆ9æ—¥

## é—®é¢˜è¯Šæ–­

### æ ¸å¿ƒé”™è¯¯
```
RuntimeError: element 0 of tensors does not require grad and does not have a grad_fn
```

è¿™ä¸ªé”™è¯¯å‘ç”Ÿåœ¨åå‘ä¼ æ’­æ—¶ï¼Œè¡¨æ˜Žlosså¼ é‡æ²¡æœ‰æ¢¯åº¦è®¡ç®—å›¾ã€‚

## æ ¹æœ¬åŽŸå› åˆ†æž

### 1. æ¢¯åº¦é“¾æ–­è£‚ï¼ˆæœ€å…³é”®ï¼‰

**ä½ç½®ï¼š** `mem_adapter_only.py` ç¬¬383-402è¡Œ

**é—®é¢˜ä»£ç ï¼š**
```python
# with torch.no_grad():  # âŒ è¿™è¡Œä»£ç æ–­å¼€äº†æ¢¯åº¦é“¾
for img in images:
    img_features = self.ocr_embed(img)
```

**ä¸ºä»€ä¹ˆæ˜¯é—®é¢˜ï¼š**
- `torch.no_grad()` å®Œå…¨ç¦ç”¨æ¢¯åº¦è®¡ç®—ï¼Œæ‰€æœ‰æ“ä½œéƒ½ä¸ä¼šæž„å»ºè®¡ç®—å›¾
- å³ä½¿OCRç¼–ç å™¨å‚æ•°è¢«å†»ç»“ï¼ˆ`requires_grad=False`ï¼‰ï¼Œæ¢¯åº¦ä»éœ€è¦æµè¿‡å®ƒæ‰èƒ½åˆ°è¾¾projå±‚
- æ²¡æœ‰è®¡ç®—å›¾ â†’ lossæ²¡æœ‰grad_fn â†’ æ— æ³•åå‘ä¼ æ’­

**æ­£ç¡®ç†è§£ï¼š**
```
å‚æ•°å†»ç»“ï¼ˆrequires_grad=Falseï¼‰â‰  æ¢¯åº¦é˜»æ–­
- requires_grad=False: å‚æ•°ä¸æ›´æ–°ï¼Œä½†æ¢¯åº¦å¯ä»¥æµè¿‡è¯¥å±‚
- torch.no_grad(): å®Œå…¨æ–­å¼€è®¡ç®—å›¾ï¼Œæ¢¯åº¦æ— æ³•æµåŠ¨
```

### 2. é…ç½®éªŒè¯ä¸è¶³

**ä½ç½®ï¼š** `mem_adapter_only.py` ç¬¬21-43è¡Œ

**é—®é¢˜ï¼š**
- åªä½¿ç”¨ `logging.warning()` è€ŒéžæŠ›å‡ºå¼‚å¸¸
- å¯¼è‡´æ¨¡åž‹ç”¨ç©ºé…ç½®åˆå§‹åŒ–ï¼Œè¿è¡Œæ—¶æ‰å‘çŽ°é”™è¯¯

### 3. APIå¼ƒç”¨è­¦å‘Š

**ä½ç½®ï¼š** `trainer/adapter_only_trainer.py` ç¬¬174è¡Œ

**é—®é¢˜ï¼š**
- ä½¿ç”¨å·²å¼ƒç”¨çš„ `tokenizer` å‚æ•°
- transformers 5.0å°†ç§»é™¤æ­¤å‚æ•°

## ä¿®å¤æ–¹æ¡ˆ

### âœ… ä¿®å¤1ï¼šç§»é™¤æ¢¯åº¦é˜»æ–­

**æ–‡ä»¶ï¼š** `mem_adapter_only.py`

**ä¿®æ”¹ï¼š**
```python
# 3. é€šè¿‡OCRç¼–ç å™¨æå–æ¯å¼ å›¾åƒçš„è§†è§‰ç‰¹å¾å¹¶æ‹¼æŽ¥
# å…³é”®ä¿®å¤ï¼šä¸ä½¿ç”¨torch.no_grad()ï¼
# è™½ç„¶OCRå‚æ•°å†»ç»“(requires_grad=False)ï¼Œä½†æ¢¯åº¦å¿…é¡»æµè¿‡OCRæ¨¡å—
# æ‰èƒ½åå‘ä¼ æ’­åˆ°projå±‚ã€‚no_grad()ä¼šå®Œå…¨æ–­å¼€è®¡ç®—å›¾ã€‚
vision_features_list = []
for img in images:
    # OCRç¼–ç : [1, N, 1024] where N=256 for 1024x1024 input
    # ä¿æŒåœ¨è®¡ç®—å›¾ä¸­ï¼Œå…è®¸æ¢¯åº¦æµåŠ¨
    img_features = self.ocr_embed(img)
    # ... å¤„ç†ç»´åº¦ ...
    vision_features_list.append(img_features)
```

**å…³é”®ç‚¹ï¼š**
1. ç§»é™¤ `with torch.no_grad():`
2. æ·»åŠ è¯¦ç»†æ³¨é‡Šè¯´æ˜ŽåŽŸå› 
3. OCRç¼–ç å™¨ä¿æŒåœ¨è®¡ç®—å›¾ä¸­

### âœ… ä¿®å¤2ï¼šä¸¥æ ¼é…ç½®éªŒè¯

**æ–‡ä»¶ï¼š** `mem_adapter_only.py`

**ä¿®æ”¹ï¼š**
```python
def __init__(self, config: MEMConfig):
    super().__init__(config)
    
    # éªŒè¯é…ç½®å‚æ•°ï¼ˆä¿®å¤ï¼šé¿å…è¿è¡Œæ—¶çš„é…ç½®é”™è¯¯ï¼‰
    if not config.base_llm_model_name:
        raise ValueError(
            "config.base_llm_model_name ä¸èƒ½ä¸ºç©ºï¼\n"
            "è¯·åœ¨åˆ›å»ºMEMConfigæ—¶æŒ‡å®šbase_model_nameå‚æ•°ã€‚"
        )
    if not config.ocr_model_name:
        raise ValueError(
            "config.ocr_model_name ä¸èƒ½ä¸ºç©ºï¼\n"
            "è¯·åœ¨åˆ›å»ºMEMConfigæ—¶æŒ‡å®šocr_model_nameå‚æ•°ã€‚"
        )
```

### âœ… ä¿®å¤3ï¼šAPIå…¼å®¹æ€§

**æ–‡ä»¶ï¼š** `trainer/adapter_only_trainer.py`

**ä¿®æ”¹ï¼š**
```python
def __init__(self, model: MEMModel, args: AdapterTrainingArguments, **kwargs):
    self._setup_trainable_params(model, args)
    
    # ä¿®å¤ï¼šå°†tokenizeré‡å‘½åä¸ºprocessing_classä»¥é¿å…å¼ƒç”¨è­¦å‘Š
    if 'tokenizer' in kwargs and 'processing_class' not in kwargs:
        kwargs['processing_class'] = kwargs.pop('tokenizer')
    
    super().__init__(model=model, args=args, **kwargs)
```

## æ¢¯åº¦æµåŠ¨åŽŸç†

### æ­£ç¡®çš„è®­ç»ƒæž¶æž„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                è¾“å…¥ (input_ids)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ æ¢¯åº¦å¯æµåŠ¨
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Embeddingå±‚ (å†»ç»“ï¼Œrequires_grad=False)       â”‚
â”‚    ä½†åœ¨train()æ¨¡å¼ï¼Œæœ‰grad_fn                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚ æ¢¯åº¦å¯æµåŠ¨
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              inputs_embeds                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚
        â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡æœ¬éƒ¨åˆ†     â”‚   â”‚  åŽ†å²æ–‡æœ¬        â”‚
â”‚ (ç›´æŽ¥ä½¿ç”¨)   â”‚   â”‚  (éœ€åŽ‹ç¼©)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  æ¸²æŸ“ä¸ºå›¾åƒ      â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ æ¢¯åº¦å¯æµåŠ¨
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ OCRç¼–ç å™¨                    â”‚
                  â”‚ (å†»ç»“ï¼Œrequires_grad=False)  â”‚
                  â”‚ âŒ ä¸èƒ½ç”¨torch.no_grad()    â”‚
                  â”‚ âœ… å¿…é¡»ä¿æŒåœ¨è®¡ç®—å›¾ä¸­        â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ æ¢¯åº¦å¯æµåŠ¨
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ vision_features  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ æ¢¯åº¦å¯æµåŠ¨
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ ðŸŽ¯ projå±‚ (å¯è®­ç»ƒ)          â”‚
                  â”‚ âœ… requires_grad=True       â”‚
                  â”‚ è¿™æ˜¯å”¯ä¸€æ›´æ–°å‚æ•°çš„å±‚          â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ æ¢¯åº¦å¯æµåŠ¨
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ vision_embeds    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         æ‹¼æŽ¥ + Padding               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ æ¢¯åº¦å¯æµåŠ¨
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ Base LLM                     â”‚
                  â”‚ (å†»ç»“ï¼Œrequires_grad=False)  â”‚
                  â”‚ âœ… ä¿æŒåœ¨è®¡ç®—å›¾ä¸­            â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ æ¢¯åº¦å¯æµåŠ¨
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚     logits       â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚  ðŸŽ¯ Loss         â”‚
                  â”‚ âœ… æœ‰grad_fn     â”‚
                  â”‚ âœ… å¯ä»¥backward  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    åå‘ä¼ æ’­ â†“
                           â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚          æ¢¯åº¦å›žä¼ è·¯å¾„                 â”‚
        â”‚ Loss â†’ Base LLM â†’ proj â†’ å‚æ•°æ›´æ–°   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å…³é”®è¦ç‚¹

1. **å‚æ•°å†»ç»“çš„æ­£ç¡®æ–¹å¼**
   ```python
   # âœ… æ­£ç¡®
   for param in model.parameters():
       param.requires_grad = False
   model.train()  # ä¿æŒtrainæ¨¡å¼
   
   # âŒ é”™è¯¯
   model.eval()  # å¯èƒ½å½±å“æŸäº›å±‚
   with torch.no_grad():  # å®Œå…¨æ–­å¼€æ¢¯åº¦
       output = model(input)
   ```

2. **ä¸ºä»€ä¹ˆå†»ç»“æ¨¡å—ä¹Ÿéœ€è¦train()æ¨¡å¼ï¼Ÿ**
   - `train()` æ¨¡å¼ç¡®ä¿å±‚ä¿æŒåœ¨è®¡ç®—å›¾ä¸­
   - è™½ç„¶å‚æ•°ä¸æ›´æ–°ï¼Œä½†æ¢¯åº¦éœ€è¦æµè¿‡
   - `eval()` ä¼šæ”¹å˜æŸäº›å±‚çš„è¡Œä¸ºï¼ˆå¦‚dropoutã€batchnormï¼‰

3. **torch.no_grad() vs requires_grad=False**
   ```python
   # requires_grad=False: 
   # - å‚æ•°ä¸æ›´æ–°
   # - æ¢¯åº¦å¯ä»¥æµè¿‡è¯¥å±‚
   # - è®¡ç®—å›¾ä¿æŒè¿žæŽ¥
   
   # torch.no_grad():
   # - å®Œå…¨ç¦ç”¨æ¢¯åº¦
   # - æ–­å¼€è®¡ç®—å›¾
   # - æ— æ³•åå‘ä¼ æ’­
   ```

## Warningåˆ†æž

### 1. Transformersç‰ˆæœ¬ä¸å…¼å®¹

```
WARNING: Incompatible transformers version detected!
Current version: 4.57.3
Required version: >=4.30.0,<4.48.0
```

**å½±å“ï¼š** ðŸŸ¡ ä¸­ç­‰
- ä¸ä¼šç›´æŽ¥å¯¼è‡´è®­ç»ƒå¤±è´¥
- å¯èƒ½å½±å“æŸäº›æ¨¡åž‹ç‰¹æ€§

**å¤„ç†ï¼š**
- å¦‚æžœè®­ç»ƒæ­£å¸¸ï¼Œæ— éœ€å¤„ç†
- å¦‚æžœé‡åˆ°é—®é¢˜ï¼Œé™çº§ï¼š`pip install 'transformers==4.47.0'`

### 2. æ¨¡åž‹ç±»åž‹ä¸åŒ¹é…

```
You are using a model of type deepseek_vl_v2 to instantiate a model of type DeepseekOCR.
```

**å½±å“ï¼š** ðŸŸ¢ ä½Ž
- è¿™æ˜¯DeepSeek-OCRæ¨¡åž‹çš„æ­£å¸¸è¡Œä¸º
- ä¸å½±å“åŠŸèƒ½

### 3. æœªåˆå§‹åŒ–æƒé‡

```
Some weights were not initialized: ['model.vision_model.embeddings.position_ids']
```

**å½±å“ï¼š** ðŸŸ¢ ä½Ž
- `position_ids` æ˜¯ç¼“å†²åŒºï¼Œä¸æ˜¯å‚æ•°
- ä¼šåœ¨é¦–æ¬¡å‰å‘ä¼ æ’­æ—¶è‡ªåŠ¨åˆå§‹åŒ–

## éªŒè¯æ­¥éª¤

### 1. å¿«é€ŸéªŒè¯

```bash
cd /path/to/OCR-MEM
python verify_gradient_flow.py
```

è„šæœ¬ä¼šæ£€æŸ¥ï¼š
- âœ… æ¨¡åž‹åŠ è½½
- âœ… å‚æ•°ç»Ÿè®¡
- âœ… lossæœ‰grad_fn
- âœ… åå‘ä¼ æ’­æˆåŠŸ
- âœ… projå±‚æŽ¥æ”¶æ¢¯åº¦
- âœ… å†»ç»“å±‚æ— æ¢¯åº¦

### 2. å®Œæ•´è®­ç»ƒéªŒè¯

```bash
bash run_training.sh
```

é¢„æœŸè¡Œä¸ºï¼š
- âœ… è®­ç»ƒæ­£å¸¸å¯åŠ¨
- âœ… Lossæ­£å¸¸è®¡ç®—å’Œæ›´æ–°
- âœ… æ— æ¢¯åº¦ç›¸å…³é”™è¯¯
- âœ… WandBæ­£å¸¸è®°å½•

## ä¿®å¤æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒä¿®å¤
- âœ… `mem_adapter_only.py` - ç§»é™¤torch.no_grad()
- âœ… `mem_adapter_only.py` - æ”¹è¿›é…ç½®éªŒè¯
- âœ… `trainer/adapter_only_trainer.py` - ä¿®å¤APIå¼ƒç”¨

### è¾…åŠ©æ–‡ä»¶
- ðŸ“„ `FIXES_APPLIED.md` - è¯¦ç»†ä¿®å¤è¯´æ˜Ž
- ðŸ“„ `verify_gradient_flow.py` - éªŒè¯è„šæœ¬
- ðŸ“„ `TRAINING_ERROR_ANALYSIS.md` - æœ¬æ–‡æ¡£

## åŽç»­å»ºè®®

### ç«‹å³æ‰§è¡Œ
1. âœ… è¿è¡Œ `verify_gradient_flow.py` éªŒè¯ä¿®å¤
2. âœ… å°æ‰¹é‡æµ‹è¯•è®­ç»ƒï¼ˆ1-2ä¸ªbatchï¼‰
3. âœ… æ£€æŸ¥GPUå†…å­˜ä½¿ç”¨
4. âœ… éªŒè¯checkpointä¿å­˜

### çŸ­æœŸä¼˜åŒ–
1. ðŸ”§ ç›‘æŽ§è®­ç»ƒæŒ‡æ ‡
2. ðŸ”§ è°ƒæ•´batch sizeå’Œæ¢¯åº¦ç´¯ç§¯
3. ðŸ”§ æ ¹æ®lossæ›²çº¿è°ƒæ•´å­¦ä¹ çŽ‡

### é•¿æœŸæ”¹è¿›
1. ðŸ“ˆ æ·»åŠ æ›´å¤šå•å…ƒæµ‹è¯•
2. ðŸ“ˆ å®žçŽ°è‡ªåŠ¨æ¢¯åº¦æ£€æŸ¥
3. ðŸ“ˆ ä¼˜åŒ–å†…å­˜ä½¿ç”¨
4. ðŸ“ˆ è€ƒè™‘ä½¿ç”¨gradient checkpointing

## æŠ€æœ¯è¦ç‚¹æ€»ç»“

### Do's âœ…
- ä½¿ç”¨ `requires_grad=False` å†»ç»“å‚æ•°
- ä¿æŒæ¨¡åž‹åœ¨ `train()` æ¨¡å¼
- ç¡®ä¿è®¡ç®—å›¾å®Œæ•´è¿žæŽ¥
- åªè®­ç»ƒprojå±‚

### Don'ts âŒ
- ä¸è¦ä½¿ç”¨ `torch.no_grad()` åŒ…è£¹éœ€è¦æ¢¯åº¦çš„æ“ä½œ
- ä¸è¦å¯¹å†»ç»“æ¨¡å—ä½¿ç”¨ `eval()` æ¨¡å¼ï¼ˆè®­ç»ƒæ—¶ï¼‰
- ä¸è¦ä½¿ç”¨ `detach()` æ–­å¼€è®¡ç®—å›¾
- ä¸è¦å‡è®¾å†»ç»“å‚æ•°å°±ä¸éœ€è¦åœ¨è®¡ç®—å›¾ä¸­

## å‚è€ƒèµ„æ–™

### PyTorchæ¢¯åº¦æœºåˆ¶
- https://pytorch.org/docs/stable/notes/autograd.html
- https://pytorch.org/tutorials/beginner/blitz/autograd_tutorial.html

### å‚æ•°å†»ç»“æœ€ä½³å®žè·µ
- https://pytorch.org/tutorials/beginner/finetuning_torchvision_models_tutorial.html

### DeepSpeedè®­ç»ƒ
- https://www.deepspeed.ai/training/

---

**åˆ†æžå®Œæˆæ—¶é—´ï¼š** 2025å¹´12æœˆ9æ—¥  
**åˆ†æžäººå‘˜ï¼š** GitHub Copilot AI Assistant  
**çŠ¶æ€ï¼š** ä¿®å¤å®Œæˆï¼Œç­‰å¾…éªŒè¯
